Bootstrap: docker
From: continuumio/miniconda3:latest

%post
    # Use conda to set channels
    conda config --add channels defaults
    conda config --add channels bioconda
    conda config --add channels conda-forge
    conda config --set channel_priority strict

    # Install mamba first
    conda install -y -c conda-forge mamba

    # Now use mamba for fast install
    mamba install -y python=3.10 snakemake admixture

%environment
    export PATH=/opt/conda/bin:$PATH

%labels
    Author Epifan√≠a Arango
    Description "Singularity container with Snakemake and ADMIXTURE from Bioconda"

%help
    Includes Snakemake and ADMIXTURE installed via Conda/Mamba.
